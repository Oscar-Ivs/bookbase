<div class="col-6 col-md-4 col-lg-3 col-xl-2 d-flex">
  <a href="{% url 'book_detail' book.id %}"
     class="card flex-fill shadow-sm text-decoration-none text-dark book-card position-relative"
     style="width:100%; max-width:300px;">
    
    <!-- Book cover -->
    <div class="position-relative">
      <div class="ratio ratio-2x3">
        <img src="{{ book.cover_url|default:'/static/img/book-placeholder.png' }}"
             alt="{{ book.title }}"
             class="card-img-top object-fit-contain"
             onerror="this.onerror=null; this.src='/static/img/book-placeholder.png';">
      </div>

      <!-- Status badge -->
      <span class="position-absolute bottom-0 start-0 m-1 badge
                   {% if book.status == 'read' %}bg-success{% else %}bg-danger{% endif %}">
        {% if book.status == 'read' %}Read{% else %}Unread{% endif %}
      </span>
    </div>

    <!-- ðŸ”” Notification badge (only if unread) -->
    {% if book.unread_count and book.unread_count > 0 %}
      <span class="badge bg-danger rounded-pill position-absolute top-0 end-0 m-1">
        {{ book.unread_count }}
      </span>
    {% endif %}

    <!-- Book info -->
    <div class="card-body p-2">
      <h6 class="card-title mb-1 text-truncate" title="{{ book.title }}">{{ book.title }}</h6>
      <p class="card-text small text-muted text-truncate mb-0" title="{{ book.author }}">{{ book.author }}</p>
    </div>
  </a>
</div>
